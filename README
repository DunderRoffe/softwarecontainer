This package consists of a LXC template and a launcher script.

The template is used by lxc-create to create an LXC container. The busybox
template was used as a basis. The template will mount a "deploy dir" on
$rootfs/deployed_app, where $rootfs is the path to the containers rootfs. This
deploy dir is bind-mounted to a directory of your choice, and is basically a
quick way to inject random stuff into the container.

Example usage:

mkdir /tmp/vim_app/
cp `which vim` /tmp/vim_app/
echo "Hello world" > /tmp/vim_app/my_text_file.txt
pelagicontain /tmp/vim_app/ /deployed_app/vim /deployed_app/my_text_file.txt

The above command should, if all goes well, launch vim inside a container.

In order to launch programs, we need access to some standard libraries. The LXC
template contains some mount bindings to standard library paths. These can be
tweaked by editing the mount points in the tamplate. Auxillary mount points can
be added in the config.


NOTE ON D-BUS RUNNING ON DESKTOP SYSTEMS

You need to do some D-Bus magic in order to get this running. The problem is:
Typically you need root access to start pelagicontain (since the lxc commands
need special privileges). You might then run pelagicontain using sudo, which is
fine, but when you do, your DBUS_SESSION_BUS_ADDRESS will not be set,
dbus-launch has not been executed for root yet in your sudo session. What
you'll need to do is to actually log in as root and start a dbus session prior
to launching pelagicontain. Alternatively you can wrap pelagicontain in a bash
script which runs dbus-launch.

Example:

sudo su
eval `dbus-launch --sh-syntax`
pelagicontain /home/myuser/deploy /deployed_app/dbus_app
exit

CONFIGURING THE DBUS PROXY
The D-Bus proxy is launched "outside" the container, and will look for two rule
files. One for the SESSION bus, and one for the SYSTEM bus. The configuration
files should be placed in the directory used for app deployment, so, if you
ran:
pelagicontain /tmp/vim_app /deployed_app/vim

.. then configs are placed in /tmp/vim_app. The configs are named:
sess_proxy_config  -- for SESSION rules
sys_proxy_config   -- for SYSTEM rules


NOTE ON PULSEAUDIO

In order to pulseaudio to work inside the container it needs to be running when
the container is started. This is the case because when pelagicontainer sets
up the container it will create a new socket to the pulseaudio server.
